$n$ 个不同元素的错排列数目

$$f_n=
\begin{cases}
0 & x = 1 \\
1 & x = 2 \\
(n-1)(f_{n-1}+f_{n-2}) & x > 3
\end{cases}$$

推导过程：

设 $n$ 号元素放在 $i$ 号位置。

如果 $i$ 号元素放在 $n$ 号位置，则变为 $n-2$ 的子问题。

否则变为 $n-1$ 的子问题。